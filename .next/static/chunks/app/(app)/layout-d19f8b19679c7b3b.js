(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4944],{7220:(e,t,s)=>{"use strict";s.d(t,{SQ:()=>d,_2:()=>c,rI:()=>o,ty:()=>i});var a=s(95155),r=s(12115),l=s(37738),n=s(25016);let o=l.bL,i=l.l9,d=r.forwardRef((e,t)=>{let{className:s,sideOffset:r=4,...o}=e;return(0,a.jsx)(l.ZL,{children:(0,a.jsx)(l.UC,{ref:t,sideOffset:r,className:(0,n.cn)("z-50 min-w-[8rem] overflow-hidden rounded-xl border border-slate-200/80 bg-white p-1.5 text-slate-950 shadow-lg","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...o})})});d.displayName=l.UC.displayName;let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.q7,{ref:t,className:(0,n.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-slate-100 focus:text-slate-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...r})});c.displayName=l.q7.displayName},21705:(e,t,s)=>{"use strict";s.d(t,{AppSidebar:()=>O});var a=s(95155),r=s(12115),l=s(52619),n=s.n(l),o=s(20063),i=s(25016),d=s(59384),c=s(12203),h=s(91169),u=s(47937),m=s(42516),f=s(15870),p=s(403),x=s(80534),b=s(89442),g=s(87066),v=s(37586),N=s(60890),w=s(46705),j=s(5937),y=s(50069),C=s(52056),A=s(50906),S=s(95740),M=s(71141),k=s(97003),D=s(33789),L=s(54679);function P(e){let{open:t,onOpenChange:s}=e,[l,n]=(0,r.useState)(""),[i,d]=(0,r.useState)(""),c=(0,o.useRouter)(),h=(0,M.n)(e=>e.setParentMode),u=async()=>{if(!(await fetch("/api/auth/parent-mode",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:l})})).ok)return void d("Invalid parent password. Demo: 1234");h(!0),s(!1),c.push("/parent/dashboard")};return(0,a.jsx)(L.lG,{open:t,onOpenChange:s,children:(0,a.jsxs)(L.Cf,{children:[(0,a.jsx)(L.c7,{children:(0,a.jsx)(L.L3,{children:"Switch to Parent Mode"})}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Enter parent password (demo: 1234)"}),(0,a.jsx)(D.p,{type:"password",value:l,onChange:e=>{n(e.target.value),d("")},placeholder:"Parent password"}),i&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:i}),(0,a.jsx)(k.$,{onClick:u,children:"Unlock"})]})})}let z={LayoutDashboard:d.A,School:c.A,Users:h.A,BookOpen:u.A,FileCheck:m.A,Settings:f.A,Megaphone:p.A,BarChart3:x.A,GraduationCap:b.A,ClipboardList:g.A,MessageSquare:v.A,Video:N.A,CircleDot:w.A,MessageCircle:j.A,UserCircle:y.A,AlertTriangle:C.A,Activity:A.A},T=[{label:"Dashboard",href:"/admin/dashboard",icon:"LayoutDashboard"},{label:"School Setup",href:"/admin/school-setup",icon:"School"},{label:"Users & Roles",href:"/admin/users",icon:"Users"},{label:"Courses",href:"/admin/courses",icon:"BookOpen"},{label:"Content Governance",href:"/admin/content-governance",icon:"FileCheck"},{label:"Assessments",href:"/admin/assessments",icon:"ClipboardList"},{label:"AI Controls",href:"/admin/ai-controls",icon:"Settings"},{label:"Announcements",href:"/admin/announcements",icon:"Megaphone"},{label:"Reports",href:"/admin/reports",icon:"BarChart3"}],U=[{label:"Dashboard",href:"/teacher/dashboard",icon:"LayoutDashboard"},{label:"Classes",href:"/teacher/classes",icon:"GraduationCap"},{label:"Assignments",href:"/teacher/assignments",icon:"ClipboardList"},{label:"Quizzes",href:"/teacher/quizzes",icon:"ClipboardList"},{label:"Live Class",href:"/teacher/live",icon:"Video"},{label:"Analytics",href:"/teacher/analytics",icon:"BarChart3"},{label:"Messages",href:"/teacher/messages",icon:"MessageSquare"}],E=[{label:"Dashboard",href:"/student/dashboard",icon:"LayoutDashboard"},{label:"Courses",href:"/student/courses",icon:"BookOpen"},{label:"Practice",href:"/student/practice",icon:"ClipboardList"},{label:"AI Tutor",href:"/student/ai-tutor",icon:"MessageCircle"},{label:"Assignments",href:"/student/assignments",icon:"FileCheck"},{label:"Exams/Quizzes",href:"/student/quizzes",icon:"ClipboardList"},{label:"Progress",href:"/student/progress",icon:"BarChart3"},{label:"Announcements",href:"/student/announcements",icon:"Megaphone"},{label:"Messages",href:"/student/messages",icon:"MessageSquare"}],R=[{label:"Dashboard",href:"/parent/dashboard",icon:"LayoutDashboard"},{label:"Performance",href:"/parent/performance",icon:"BarChart3"},{label:"Attendance",href:"/parent/attendance",icon:"UserCircle"},{label:"Report Cards",href:"/parent/report-cards",icon:"FileCheck"},{label:"Messages",href:"/parent/messages",icon:"MessageSquare"},{label:"Activity",href:"/parent/activity",icon:"Activity"},{label:"Alerts",href:"/parent/alerts",icon:"AlertTriangle"}];function O(){let e=(0,o.usePathname)(),t=(0,M.n)(e=>e.user),s=(0,M.n)(e=>e.parentMode),[l,c]=(0,r.useState)(!1),h=s&&(null==t?void 0:t.role)==="STUDENT"?R:(null==t?void 0:t.role)==="ADMIN"?T:(null==t?void 0:t.role)==="TEACHER"?U:(null==t?void 0:t.role)==="PARENT"?R:(null==t?void 0:t.role)==="STUDENT"?E:T;return(0,a.jsxs)("aside",{className:"flex h-full w-60 flex-col border-r border-slate-200/80 bg-white shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 p-5",children:[(0,a.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-lg bg-gradient-to-br from-indigo-500 to-indigo-700 text-white shadow-sm",children:(0,a.jsx)(S.A,{className:"h-5 w-5"})}),(0,a.jsx)(n(),{href:"/",className:"text-lg font-bold text-slate-900",children:"School LMS"})]}),(0,a.jsx)("nav",{className:"flex-1 space-y-1 px-3 py-2",children:h.map(t=>{var s;let r=null!=(s=z[t.icon])?s:d.A,l=e===t.href||e.startsWith(t.href+"/");return(0,a.jsxs)(n(),{href:t.href,className:(0,i.cn)("flex items-center gap-3 rounded-lg px-3 py-2.5 text-sm font-medium transition-all duration-200",l?"bg-indigo-50 text-indigo-700 shadow-sm":"text-slate-600 hover:bg-slate-50 hover:text-slate-900"),children:[(0,a.jsx)(r,{className:(0,i.cn)("h-5 w-5",l?"text-indigo-600":"text-slate-400")}),t.label]},t.href)})}),(null==t?void 0:t.role)==="STUDENT"&&!s&&(0,a.jsx)("div",{className:"border-t border-slate-100 p-4",children:(0,a.jsx)("button",{onClick:()=>c(!0),className:"w-full rounded-lg border border-amber-200 bg-amber-50 px-3 py-2 text-sm font-medium text-amber-800 transition-colors hover:bg-amber-100",children:"Switch to Parent Mode"})}),(0,a.jsx)(P,{open:l,onOpenChange:c})]})}},25016:(e,t,s)=>{"use strict";s.d(t,{cn:()=>l});var a=s(2821),r=s(75889);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},31013:(e,t,s)=>{"use strict";s.d(t,{AppTopbar:()=>b});var a=s(95155),r=s(20063),l=s(52619),n=s.n(l),o=s(27937),i=s(50700),d=s(85998),c=s(20508),h=s(84926),u=s(71141),m=s(97003),f=s(7220),p=s(25016);function x(){let e=(0,r.usePathname)().split("/").filter(Boolean);return(0,a.jsxs)("nav",{className:"flex items-center gap-1 text-sm",children:[(0,a.jsx)(n(),{href:"/",className:"rounded-md px-2 py-1 text-slate-500 transition-colors hover:bg-slate-100 hover:text-slate-700",children:"Home"}),e.map((t,s)=>(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(o.A,{className:"h-4 w-4 text-slate-300"}),(0,a.jsx)("span",{className:(0,p.cn)("rounded-md px-2 py-1 capitalize",s===e.length-1?"font-medium text-slate-900":"text-slate-500 hover:bg-slate-100 hover:text-slate-700"),children:t.replace(/-/g," ")})]},s))]})}function b(){var e;let t=(0,u.n)(e=>e.user),s=(0,u.n)(e=>e.parentMode),r=(0,u.n)(e=>e.logout),l=async()=>{await fetch("/api/auth/logout",{method:"POST"}),r(),window.location.href="/login"};return(0,a.jsxs)("header",{className:"sticky top-0 z-10 flex h-14 items-center justify-between border-b border-slate-200/80 bg-white/80 px-6 backdrop-blur-sm",children:[(0,a.jsx)(x,{}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(m.$,{variant:"ghost",size:"icon",className:"rounded-full",title:"Command palette (Ctrl+K)",children:(0,a.jsx)(i.A,{className:"h-5 w-5 text-slate-500"})}),(0,a.jsxs)(m.$,{variant:"ghost",size:"icon",className:"rounded-full relative",title:"Notifications",children:[(0,a.jsx)(d.A,{className:"h-5 w-5 text-slate-500"}),(0,a.jsx)("span",{className:"absolute -right-1 -top-1 flex h-4 w-4 items-center justify-center rounded-full bg-indigo-500 text-[10px] font-medium text-white",children:"3"})]}),(0,a.jsxs)(f.rI,{children:[(0,a.jsx)(f.ty,{asChild:!0,children:(0,a.jsxs)(m.$,{variant:"ghost",className:"gap-2 rounded-full pl-2 pr-3 hover:bg-slate-100",children:[(0,a.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-indigo-100 text-indigo-600",children:(0,a.jsx)(c.A,{className:"h-4 w-4"})}),(0,a.jsx)("span",{className:"max-w-[120px] truncate text-sm font-medium",children:null!=(e=null==t?void 0:t.name)?e:"User"}),s&&(0,a.jsx)("span",{className:"rounded bg-amber-100 px-1.5 py-0.5 text-xs font-medium text-amber-800",children:"Parent"})]})}),(0,a.jsxs)(f.SQ,{align:"end",className:"w-56 rounded-xl border-slate-200/80 p-1 shadow-lg",children:[(0,a.jsx)(f._2,{asChild:!0,children:(0,a.jsx)(n(),{href:"/pricing",className:"flex cursor-pointer items-center rounded-lg px-3 py-2",children:"Pricing"})}),(null==t?void 0:t.role)==="ADMIN"&&(0,a.jsx)(f._2,{onClick:async()=>{await fetch("/api/seed/reset",{method:"POST"}),window.location.reload()},className:"flex cursor-pointer items-center rounded-lg px-3 py-2",children:"Reset Demo Data"}),(0,a.jsxs)(f._2,{onClick:l,className:"flex cursor-pointer items-center rounded-lg px-3 py-2 text-red-600 focus:text-red-600",children:[(0,a.jsx)(h.A,{className:"mr-2 h-4 w-4"}),"Logout"]})]})]})]})]})}},33789:(e,t,s)=>{"use strict";s.d(t,{p:()=>n});var a=s(95155),r=s(12115),l=s(25016);let n=r.forwardRef((e,t)=>{let{className:s,type:r,...n}=e;return(0,a.jsx)("input",{type:r,className:(0,l.cn)("flex h-11 w-full rounded-lg border-2 border-slate-200 bg-white px-4 py-2 text-sm transition-colors placeholder:text-slate-400","focus-visible:outline-none focus-visible:border-indigo-400 focus-visible:ring-2 focus-visible:ring-indigo-500/20","disabled:cursor-not-allowed disabled:opacity-50","file:border-0 file:bg-transparent file:text-sm file:font-medium",s),ref:t,...n})});n.displayName="Input"},41810:(e,t,s)=>{Promise.resolve().then(s.bind(s,98129)),Promise.resolve().then(s.bind(s,21705)),Promise.resolve().then(s.bind(s,31013))},54679:(e,t,s)=>{"use strict";s.d(t,{Cf:()=>i,Es:()=>u,L3:()=>c,c7:()=>d,lG:()=>o,rr:()=>h});var a=s(95155),r=s(12115),l=s(93409),n=s(25016);let o=l.bL;l.l9;let i=r.forwardRef((e,t)=>{let{className:s,children:r,...o}=e;return(0,a.jsxs)(l.ZL,{children:[(0,a.jsx)(l.hJ,{className:"fixed inset-0 z-50 bg-black/50"}),(0,a.jsx)(l.UC,{ref:t,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 w-full max-w-lg translate-x-[-50%] translate-y-[-50%] rounded-lg border bg-white p-6 shadow-lg",s),...o,children:r})]})});i.displayName=l.UC.displayName;let d=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)("mb-4",t),...s})},c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.hE,{ref:t,className:(0,n.cn)("text-lg font-semibold",s),...r})});c.displayName=l.hE.displayName;let h=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.VY,{ref:t,className:(0,n.cn)("text-sm text-slate-500",s),...r})});h.displayName=l.VY.displayName;let u=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};u.displayName="DialogFooter"},71141:(e,t,s)=>{"use strict";s.d(t,{n:()=>l});var a=s(25959),r=s(89863);let l=(0,a.v)()((0,r.Zr)(e=>({user:null,parentMode:!1,setUser:t=>e({user:t,parentMode:!1}),setParentMode:t=>e({parentMode:t}),logout:()=>e({user:null,parentMode:!1})}),{name:"lms-auth"}))},97003:(e,t,s)=>{"use strict";s.d(t,{$:()=>d});var a=s(95155),r=s(12115),l=s(32467),n=s(83101),o=s(25016);let i=(0,n.F)("inline-flex items-center justify-center whitespace-nowrap rounded-lg text-sm font-medium ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500/50 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 active:scale-[0.98]",{variants:{variant:{default:"bg-indigo-600 text-white shadow-sm hover:bg-indigo-700 hover:shadow-md",destructive:"bg-red-500 text-white shadow-sm hover:bg-red-600",outline:"border-2 border-slate-200 bg-white hover:border-indigo-300 hover:bg-indigo-50/50",secondary:"bg-slate-100 text-slate-700 hover:bg-slate-200",ghost:"hover:bg-slate-100 hover:text-slate-900",link:"text-indigo-600 underline-offset-4 hover:underline"},size:{default:"h-10 px-5 py-2",sm:"h-9 rounded-lg px-3",lg:"h-11 rounded-lg px-6",icon:"h-10 w-10 rounded-lg"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:s,variant:r,size:n,asChild:d=!1,...c}=e,h=d?l.DX:"button";return(0,a.jsx)(h,{className:(0,o.cn)(i({variant:r,size:n,className:s})),ref:t,...c})});d.displayName="Button"},98129:(e,t,s)=>{"use strict";s.d(t,{AuthHydration:()=>l});var a=s(12115),r=s(71141);function l(){let e=(0,r.n)(e=>e.setUser);return(0,a.useEffect)(()=>{fetch("/api/auth/me").then(e=>e.json()).then(t=>{t.user&&e(t.user)})},[e]),null}}},e=>{e.O(0,[2619,5707,1910,5747,6565,8328,984,8441,1255,7358],()=>e(e.s=41810)),_N_E=e.O()}]);